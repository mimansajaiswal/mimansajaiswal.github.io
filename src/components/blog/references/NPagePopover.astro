---
interface Props {
	excerpt?: string;
	linkedTo: string;
	popoverSpanText: string;
	popoverTitle: string;
	postId: string;
	linkText?: string;
}
const {
	excerpt = "",
	linkedTo,
	popoverSpanText,
	popoverTitle,
	postId,
	linkText = "Read more",
} = Astro.props;
let id = "id" + Math.random().toString(16).slice(2) + "---" + postId;
---

<span class="site-page-link text-link">
	<span
		data-popover-target={`popover-description-${id}`}
		data-popover-placement="bottom-end"
		class="cursor-pointer"
		data-href={linkedTo}
		id={`popover-click-${id}`}
		aria-label="Show information for the linked content"
	>
		{popoverSpanText ? popoverSpanText : <slot />}
	</span>
</span>

<template id={`template-popover-description-${id}`}>
	<div
		data-popover
		id={`popover-description-${id}`}
		role="tooltip"
		class="popoverEl invisible absolute z-40 inline-block hidden w-72 rounded-lg border border-accent-2/20 bg-popover-bg/95 text-sm text-textColor/80 opacity-0 shadow-xs backdrop-blur-sm transition-opacity duration-300"
	>
		<a href={linkedTo}>
			<div class="space-y-2 p-3">
				<h3 class="text-accent decoration-accent-2/20 font-semibold underline decoration-wavy">
					{popoverTitle}
				</h3>
				{excerpt && <p>{excerpt}</p>}
				<a
					href={linkedTo}
					data-popover-link
					class="text-link/90 flex max-w-full items-center font-medium hover:underline"
				>
					{linkText}
					<svg
						class="ms-1.5 h-2 w-2 rtl:rotate-180"
						aria-hidden="true"
						xmlns="http://www.w3.org/2000/svg"
						fill="none"
						viewBox="0 0 6 10"
					>
						<path
							stroke="currentColor"
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="m1 9 4-4-4-4"></path>
					</svg>
				</a>
			</div>
		</a>
		<div data-popper-arrow></div>
	</div>
</template>
